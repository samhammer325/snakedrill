import{p as e}from"./phaser-C2_wa_Fb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class t extends e.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png"),this.load.image("wall","assets/tPipe.png"),this.load.image("player","assets/snakehead.png"),this.load.image("body","assets/snakebody.png"),this.load.image("berry","assets/berry.png"),this.load.image("tiles","assets/tiles.png"),this.load.image("floor-tiles","assets/floor-tiles.png")}create(){this.scene.start("Preloader")}}class i extends e.Scene{constructor(){super("Game")}create(){s.bind(this)(),d.bind(this)(),y.bind(this)()}updateGame(){this.player.lastLocation={x:this.player.x,y:this.player.y},this.player.x=Math.round(this.player.x/this.tileSize)*this.tileSize,this.player.y=Math.round(this.player.y/this.tileSize)*this.tileSize,this.player.move(this.player.direction,this.tileSize),this.moved=!1}}function s(){this.cameras.main.setBackgroundColor(65280),this.tileSize=128,this.gameSpeed=150,this.zoom=1,this.tileNumber=25,this.gameBorders=50*this.tileSize,this.add.image(0,0,"floor-tiles").setOrigin(0,0).setDisplaySize(this.sys.game.config.width,this.sys.game.config.height),console.log("player",this.textures.get("player")),this.player=this.add.image(128,128,"player"),this.player.depth=3,this.player.setOrigin(0,0),this.player.direction="right";var e=Math.floor(.5*this.tileNumber)*this.tileSize,t=Math.floor(.5*this.tileNumber)*this.tileSize;this.player.x=e,this.player.y=t,this.player.setScale(.5),this.tweens.add({targets:this.player,x:e+this.tileSize,y:t,duration:this.gameSpeed,ease:"Linear"}),this.player.bodySegments=[],this.player.bodySegments.push(this.add.image(e-2*this.tileSize,t,"body")),this.player.bodySegments.push(this.add.image(e-4*this.tileSize,t,"body")),this.player.bodySegments.push(this.add.image(e-6*this.tileSize,t,"body")),this.player.bodySegments.push(this.add.image(e-8*this.tileSize,t,"body")),this.player.bodySegments.push(this.add.image(e-10*this.tileSize,t,"body")),console.log("this",this),console.log("physics",this.physics),this.physics.add.existing(this.player),this.player.body.setCircle(90),this.player.bodySegments.forEach(((i,s)=>{i.setOrigin(0,0),console.log("position",i.x,i.y),this.player.bodySegments[s].depth=2,this.player.bodySegments[s].setScale(.5),this.tweens.add({targets:this.player.bodySegments[s],x:e-this.tileSize*s*2+this.tileSize,y:t,duration:this.gameSpeed,ease:"Linear"}),this.player.bodySegments[s].frontSegment=0===s?this.player:this.player.bodySegments[s-1],s>1&&(this.physics.add.existing(this.player.bodySegments[s]),this.player.bodySegments[s].body.setCircle(60),this.physics.add.collider(this.player,this.player.bodySegments[s],g,null,this))})),this.dKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),this.dKey.on("down",o.bind(this),this),this.aKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),this.aKey.on("down",r.bind(this),this),this.wKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),this.wKey.on("down",n.bind(this),this),this.sKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.sKey.on("down",l.bind(this),this),this.upKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.UP),this.upKey.on("down",n.bind(this),this),this.downKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.DOWN),this.downKey.on("down",l.bind(this),this),this.leftKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.LEFT),this.leftKey.on("down",r.bind(this),this),this.rightKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.RIGHT),this.rightKey.on("down",o.bind(this),this),this.player.move=h.bind(this.player),this.player.bodySegmentsMove=a.bind(this.player),this.cameras.main.setZoom(this.zoom),this.time.addEvent({delay:this.gameSpeed,callback:this.updateGame,callbackScope:this,loop:!0}),this.input.once("pointerdown",(()=>{this.player.destroy(),this.player.bodySegments.forEach((e=>{e.destroy()})),this.scene.stop("Game"),this.scene.start("GameOver")}))}function h(e,t){switch(e){case"up":this.y-=t;break;case"down":this.y+=t;break;case"left":this.x-=t;break;case"right":this.x+=t}this.scene.tweens.add({targets:this,x:this.x,y:this.y,duration:this.scene.gameSpeed,ease:"Linear"}),this.bodySegmentsMove(this.scene)}function a(){var e,t;this.bodySegments.forEach((i=>{i.x,i.y,i.x=Math.round(i.x/this.scene.tileSize)*this.scene.tileSize,i.y=Math.round(i.y/this.scene.tileSize)*this.scene.tileSize,i.lastLocation={x:i.x,y:i.y},e=i.frontSegment.lastLocation.x,t=i.frontSegment.lastLocation.y,e!==Math.round(i.frontSegment.x/this.tileSize)*this.tileSize&&this.scene.tweens.add({targets:i,x:e,y:t,duration:this.scene.gameSpeed,ease:"Linear"})}))}function o(){!0!==this.moved&&"left"!==this.player.direction&&(this.player.direction="right",this.moved=!0)}function r(){!0!==this.moved&&"right"!==this.player.direction&&(this.player.direction="left",this.moved=!0)}function n(){!0!==this.moved&&"down"!==this.player.direction&&(this.player.direction="up",this.moved=!0)}function l(){!0!==this.moved&&"up"!==this.player.direction&&(this.player.direction="down",this.moved=!0)}function d(){console.log("createwalls"),this.rightWall=this.add.rectangle(this.game.config.width,this.game.config.height,128,this.game.config.height,8421504),this.rightWall.setOrigin(0,0),this.rightWall.x=this.game.config.width-this.tileSize,this.rightWall.y=0,this.physics.add.existing(this.rightWall),this.physics.add.collider(this.player,this.rightWall,g,null,this),this.topWall=this.add.rectangle(this.game.config.width,this.game.config.height,this.game.config.width,128,8421504),this.topWall.setOrigin(0,0),this.topWall.x=0,this.topWall.y=0,this.physics.add.existing(this.topWall),this.topWallBarrier=this.add.rectangle(this.game.config.width,this.game.config.height,this.game.config.width,50,8421504),this.topWallBarrier.setOrigin(0,0),this.topWallBarrier.x=0,this.topWallBarrier.y=-50,this.physics.add.existing(this.topWallBarrier),this.physics.add.collider(this.player,this.topWallBarrier,g,null,this),this.leftWall=this.add.rectangle(this.game.config.width,this.game.config.height,128,this.game.config.height,8421504),this.leftWall.setOrigin(0,0),this.leftWall.x=0,this.leftWall.y=0,this.physics.add.existing(this.leftWall),this.leftWallBarrier=this.add.rectangle(this.game.config.width,this.game.config.height,50,this.game.config.height,8421504),this.leftWallBarrier.setOrigin(0,0),this.leftWallBarrier.x=-50,this.leftWallBarrier.y=0,this.physics.add.existing(this.leftWallBarrier),this.physics.add.collider(this.player,this.leftWallBarrier,g,null,this),this.bottomWall=this.add.rectangle(this.game.config.width,this.game.config.height,this.game.config.width,128,8421504),this.bottomWall.setOrigin(0,0),this.bottomWall.x=0,this.bottomWall.y=this.game.config.height-this.tileSize,this.physics.add.existing(this.bottomWall),this.physics.add.collider(this.player,this.bottomWall,g,null,this)}function y(){var e,t,i;console.log("addFood"),this.food=this.add.image(this.game.config.width,this.game.config.height,"berry"),this.food.setScale(.5),this.physics.add.existing(this.food),this.food.setOrigin(0,0),this.food.body.setCircle(90);do{e=!1,t=(Math.floor(Math.random()*(this.game.config.width-256)/this.tileSize)+1)*this.tileSize,i=(Math.floor(Math.random()*(this.game.config.height-256)/this.tileSize)+1)*this.tileSize,this.player.bodySegments.forEach((s=>{Math.round(s.x/this.tileSize)*this.tileSize===t&&Math.round(s.y/this.tileSize)*this.tileSize===i&&(console.log("food on snake!!!!!!!!!!!!!!!!!!!!!!!!!!"),e=!0)}))}while(e);this.food.x=t,this.food.y=i,this.physics.add.existing(this.food),this.physics.add.collider(this.player,this.food,c,null,this)}function g(){console.log("collision"),this.scene.stop("Game"),this.scene.start("GameOver")}function c(){this.player.bodySegments.push(this.add.rectangle(this.game.config.width,this.game.config.height,this.tileSize,this.tileSize,255)),this.player.bodySegments[this.player.bodySegments.length-1].setOrigin(0,0),this.player.bodySegments[this.player.bodySegments.length-1].x=this.player.bodySegments[this.player.bodySegments.length-2].x,this.player.bodySegments[this.player.bodySegments.length-1].y=this.player.bodySegments[this.player.bodySegments.length-2].y,this.player.bodySegments[this.player.bodySegments.length-1].frontSegment=this.player.bodySegments[this.player.bodySegments.length-2],this.physics.add.existing(this.player.bodySegments[this.player.bodySegments.length-1]),this.physics.add.collider(this.player,this.player.bodySegments[this.player.bodySegments.length-1],g.bind(this),null,this.scene),this.player.bodySegments[this.player.bodySegments.length-1].body.setCircle(50),this.food.destroy(),y.bind(this)()}class p extends e.Scene{constructor(){super("GameOver")}create(){this.cameras.main.setBackgroundColor(16711680),this.add.text(1600,1600,"Game Over",{fontFamily:"Arial Black",fontSize:128,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class m extends e.Scene{constructor(){super("MainMenu")}create(){this.add.text(1600,1600,"Start Game",{fontFamily:"Arial Black",fontSize:128,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}}class f extends e.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png")}create(){this.scene.start("MainMenu")}}const b={type:Phaser.AUTO,width:3200,height:3200,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{y:0}}},scene:[t,f,m,i,p]};new Phaser.Game(b);
